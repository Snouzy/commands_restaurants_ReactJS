(this.webpackJsonpcotd=this.webpackJsonpcotd||[]).push([[0],{31:function(e,t,a){e.exports=a(59)},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),r=a(18),i=a(62),c=a(64),o=a(63),l=a(5),u=a(6),m=a(8),p=a(7),h=a(9);function d(e){return(e/100).toLocaleString("fr-FR",{style:"currency",currency:"EUR"})}function f(e){return e[Math.floor(Math.random()*e.length)]}function v(){var e=["adorable","magnifique","propre","terne","elegant","fantaisie","glamour","beau","long","superbe","demode","plaine","pittoresque","p\xe9tillante","moche","disgracieux","colerique","perplexe","maladroit","defaitiste","genant","feroce","grincheux","sans espoir","jaloux","fainenant","mysterieux","nerveux","odieux","paniqueur","repoussant","peureux","irreflechi","crispe","inquiet"];return"".concat(f(e),"-").concat(f(e),"-").concat(f(["femme","homme","enfants","dent","pied","gens","feuilles","souris","oies","moiti\xe9s","couteaux","epouses","vies","elfes","pains","patates","tomates","cactus","foyers","champignons","noyaux","programmes","analyses","diagnostiques","oasis","theses","crises","phenomenes","criteres","donnees"]))}var g=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).myInput=n.a.createRef(),a.goToStore=function(e){e.preventDefault();var t=a.myInput.current.value;a.props.history.push("/store/".concat(t))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{className:"store-selector",onSubmit:this.goToStore},n.a.createElement("h2",null,"Nom du magasin"),n.a.createElement("input",{type:"text",ref:this.myInput,required:!0,placeholder:"Store Name",defaultValue:v()}),n.a.createElement("button",{type:"submit"},"Visit Store \u27a1"))}}]),t}(s.Component),b=a(12),E=function(e){return n.a.createElement("header",{className:"top"},n.a.createElement("h1",null,"Prise",n.a.createElement("span",{className:"ofThe"},n.a.createElement("span",{className:"of"},"de "),n.a.createElement("span",{className:"the"},"la")),"matin\xe9e"),n.a.createElement("h3",{className:"tagline"},n.a.createElement("span",null,e.tagline)))},O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).nameRef=n.a.createRef(),a.priceRef=n.a.createRef(),a.statusRef=n.a.createRef(),a.descRef=n.a.createRef(),a.imageRef=n.a.createRef(),a.createFish=function(e){e.preventDefault();var t={name:a.nameRef.current.value,price:parseFloat(a.priceRef.current.value),status:a.statusRef.current.value,desc:a.descRef.current.value,image:a.imageRef.current.value};a.props.addFish(t),console.log(e.currentTarget.reset())},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{className:"fish-edit",onSubmit:this.createFish},n.a.createElement("input",{name:"name",ref:this.nameRef,type:"text",placeholder:"Name"}),n.a.createElement("input",{name:"price",ref:this.priceRef,type:"text",placeholder:"Price"}),n.a.createElement("select",{name:"status",ref:this.statusRef},n.a.createElement("option",{value:"available"},"En stock!"),n.a.createElement("option",{value:"unavailable"},"\xc9puis\xe9 !")),n.a.createElement("textarea",{name:"desc",ref:this.descRef,placeholder:"Desc"}),n.a.createElement("input",{name:"image",ref:this.imageRef,type:"text",placeholder:"Image"}),n.a.createElement("button",{type:"submit"},"+ Add Fish"))}}]),t}(s.Component),y=a(19),j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).handleChange=function(e){console.log(e);var t=Object(b.a)({},a.props.fish,Object(y.a)({},e.currentTarget.name,e.currentTarget.value));a.props.updateFish(a.props.index,t)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"fish-edit"},n.a.createElement("input",{type:"text",name:"name",onChange:this.handleChange,value:this.props.fish.name}),n.a.createElement("input",{type:"text",name:"price",onChange:this.handleChange,value:this.props.fish.price}),n.a.createElement("select",{name:"status",onChange:this.handleChange,value:this.props.fish.status},n.a.createElement("option",{value:"available"},"En stock"),n.a.createElement("option",{value:"unavailable"},"En rupture")),n.a.createElement("textarea",{name:"desc",onChange:this.handleChange,value:this.props.fish.desc}),n.a.createElement("input",{type:"text",name:"image",onChange:this.handleChange,value:this.props.fish.image}),n.a.createElement("button",{onClick:function(){return e.props.deleteFish(e.props.index)}},"Supprimer le poisson"))}}]),t}(n.a.Component),x=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"inventory"},n.a.createElement("h2",null,"Inventaire"),Object.keys(this.props.fish).map((function(t){return n.a.createElement(j,{key:t,index:t,fish:e.props.fish[t],updateFish:e.props.updateFish,deleteFish:e.props.deleteFish})})),n.a.createElement(O,{addFish:this.props.addFish}),n.a.createElement("button",{onClick:this.props.loadSampleFishes},"Charger un exemple de poissons"))}}]),t}(s.Component),C=a(16),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderOrder=function(e){var t=a.props.fishes[e],s=a.props.order[e],r=t&&"available"===t.status;return t?r?n.a.createElement(C.CSSTransition,{classNames:"order",key:e,timeout:{enter:1e3,exit:1e3}},n.a.createElement("li",{key:e},n.a.createElement("span",null,n.a.createElement(C.TransitionGroup,{component:"span",className:"count"},n.a.createElement(C.CSSTransition,{classNames:"count",key:s,timeout:{enter:500,exit:500}},n.a.createElement("span",null,s))),1===s?"pc":"pcs"," ",t.name," ",d(s*t.price),n.a.createElement("button",{onClick:function(){return a.props.removeFromOrder(e)}},"X")))):n.a.createElement("li",{key:e},"D\xe9sol\xe9, ",t?t.name:"fish"," n'est plus disponible !"):null},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.order),a=t.reduce((function(t,a){var s=e.props.fishes[a],n=e.props.order[a];return s&&"available"===s.status?t+n*s.price:t}),0);return n.a.createElement("div",{className:"order-wrap"},n.a.createElement("h2",null,"Commande"),n.a.createElement(C.TransitionGroup,{component:"ul",className:"order"},t.map(this.renderOrder)),n.a.createElement("div",{className:"total"},n.a.createElement("strong",null,d(a))))}}]),t}(s.Component),S={fish1:{name:"Fletan du Pacifique",image:"/images/hali.jpg",desc:"Le poisson blanc pr\xe9f\xe9r\xe9 de tous. Nous le couperons \xe0 la taille dont vous avez besoin et l'exp\xe9dierons.",price:1724,status:"available"},fish2:{name:"Homard",image:"/images/lobster.jpg",desc:"Ces beaut\xe9s tendres et app\xe9tissantes sont un succ\xe8s fantastique \xe0 tout d\xeener.",price:3200,status:"available"},fish3:{name:"Petoncles de mer",image:"/images/scallops.jpg",desc:"Gros, doux et tendre. V\xe9ritables p\xe9toncles secs des eaux glac\xe9es de l'Alaska.",price:1684,status:"unavailable"},fish4:{name:"Mahi Mahi",image:"/images/mahi.jpg",desc:"Chair maigre avec un profil de saveur douce et sucr\xe9e, une texture mod\xe9r\xe9ment ferme et de gros flocons humides. ",price:1129,status:"available"},fish5:{name:"Crabe royal",image:"/images/crab.jpg",desc:"Ouvrez-les et d\xe9gustez-les nature ou avec l'une de nos sauces \xe0 cocktail",price:4234,status:"available"},fish6:{name:"Saumon atlantique",image:"/images/salmon.jpg",desc:"Ce saumon feuillet\xe9 et huileux est vraiment le roi de la mer. Faites-le cuire, grillez-le... toutes les combinaisons sont bonnes !",price:1453,status:"available"},fish7:{name:"Hu\xeetres",image:"/images/oysters.jpg",desc:"Une hu\xeetre charnue douce avec une saveur sucr\xe9e et sal\xe9e et une finition propre.",price:2543,status:"available"},fish8:{name:"Moules",image:"/images/mussels.jpg",desc:"Les meilleures moules du Pacifique au go\xfbt complexe et savoureux.",price:425,status:"available"},fish9:{name:"Crevettes geantes",image:"/images/prawns.jpg",desc:"Ces enormes morceaux sucr\xe9s sont parfaits pour les mangeurs sans fin !",price:2250,status:"available"}},N=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.details,a=t.image,s=t.name,r=t.price,i=t.desc,c="available"===t.status;return n.a.createElement("li",{className:"menu-fish"},n.a.createElement("img",{src:a,alt:this.props.details.name}),n.a.createElement("h3",{className:"fish-name"},s,n.a.createElement("span",{className:d(r)},r)),n.a.createElement("p",null,i),n.a.createElement("button",{disabled:!c,onClick:function(){return e.props.addToOrder(e.props.index)}},c?"Ajouter au panier":"\xc9puis\xe9"))}}]),t}(s.Component),k=a(28),R=a.n(k),T=a(29),q=a.n(T).a.initializeApp({apiKey:"AIzaSyC4h9xSHrmKc-KU9cmpSO_cNN_MP5pTK0A",authDomain:"restaurants-commands-reactjs.firebaseapp.com",databaseURL:"https://restaurants-commands-reactjs.firebaseio.com"}),A=R.a.createClass(q.database()),I=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={fishes:{},order:{}},a.deleteFish=function(e){var t=Object(b.a)({},a.state.fishes);t[e]=null,a.setState({fishes:t})},a.loadSampleFishes=function(){a.setState({fishes:S})},a.addFish=function(e){console.log("Adding a fish");var t=Object(b.a)({},a.state.fishes);t["fish".concat(Date.now())]=e,a.setState({fishes:t})},a.updateFish=function(e,t){var s=Object(b.a)({},a.state.fishes);s[e]=t,a.setState({fishes:s})},a.addToOrder=function(e){var t=Object(b.a)({},a.state.order);t[e]=t[e]+1||1,a.setState({order:t})},a.removeFromOrder=function(e){var t=Object(b.a)({},a.state.order);delete t[e],a.setState({order:t})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem(this.props.match.params.storeId);e&&this.setState({order:JSON.parse(e)}),this.ref=A.syncState("".concat(this.props.match.params.storeId,"/fishes"),{context:this,state:"fishes"})}},{key:"componentDidUpdate",value:function(){localStorage.setItem(this.props.match.params.storeId,JSON.stringify(this.state.order))}},{key:"componentWillUnmount",value:function(){A.removeBinding(this.ref)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"catch-of-the-day"},n.a.createElement("div",{className:"menu"},n.a.createElement(E,{tagline:"Commerce de poissons frais"}),n.a.createElement("ul",{className:"fishes"},Object.keys(this.state.fishes).map((function(t){return n.a.createElement(N,{key:t,index:t,details:e.state.fishes[t],addToOrder:e.addToOrder})})))),n.a.createElement(F,{fishes:this.state.fishes,order:this.state.order,removeFromOrder:this.removeFromOrder}),n.a.createElement(x,{addFish:this.addFish,updateFish:this.updateFish,deleteFish:this.deleteFish,loadSampleFishes:this.loadSampleFishes,fish:this.state.fishes}))}}]),t}(s.Component),w=function(){return n.a.createElement("h2",null,"NOT FOUND")},D=function(){return n.a.createElement(i.a,null,n.a.createElement(c.a,null,n.a.createElement(o.a,{exact:!0,path:"/",component:g}),n.a.createElement(o.a,{path:"/store/:storeId",component:I}),n.a.createElement(o.a,{component:w})))};a(58);Object(r.render)(n.a.createElement(D,null),document.querySelector("#main"))}},[[31,1,2]]]);
//# sourceMappingURL=main.f4574c86.chunk.js.map